(()=>{var t={384:t=>{t.exports={Song:class{constructor(t,e,s){this.artists=e,this.title=t,this.coverart=s}toHTML(t){const e=document.createElement("div");e.className="song-results-option",e.setAttribute("data-title",this.title),e.setAttribute("data-artists",this.artists);const s=document.createElement("img");s.className="song-image",s.src=this.coverart,e.appendChild(s);const n=document.createElement("div");n.className="song-info";const o=document.createElement("div");o.className="song-name",o.innerText=this.title,n.appendChild(o);const i=document.createElement("div");i.className="song-artists",i.innerText=this.artists,n.appendChild(i),e.appendChild(n);const r=document.createElement("div");return t?(r.className="song-add-btn",r.innerHTML='<?xml version="1.0" encoding="iso-8859-1"?>\n            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n               width="510px" height="510px" viewBox="0 0 510 510" style="enable-background:new 0 0 510 510;" xml:space="preserve">\n              <g id="add-circle-outline">\n                <path d="M280.5,127.5h-51v102h-102v51h102v102h51v-102h102v-51h-102V127.5z M255,0C114.75,0,0,114.75,0,255s114.75,255,255,255\n                  s255-114.75,255-255S395.25,0,255,0z M255,459c-112.2,0-204-91.8-204-204S142.8,51,255,51s204,91.8,204,204S367.2,459,255,459z"/>\n              </g>\n            </svg>'):(r.className="song-remove-btn",r.innerHTML='<?xml version="1.0" encoding="iso-8859-1"?>\n            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n               width="510px" height="510px" viewBox="0 0 1024 1024" style="enable-background:new 0 0 510 510;" xml:space="preserve">\n              <g id="add-circle-outline">\n                <path d="M512 1024C229.248 1024 0 794.752 0 512S229.248 0 512 0s512 229.248 512 512-229.248 512-512 512z m0-896C299.968 128 128 299.968 128 512s171.968 384 384 384 384-171.968 384-384S724.032 128 512 128z m192 448H320a64 64 0 1 1 0-128h384a64 64 0 0 1 64 64c0 35.392-28.608 64-64 64z"/>\n              </g>\n            </svg>'),e.appendChild(r),e}},Playlist:class{constructor(t){this.songs=t}},User:class{constructor(t,e,s,n){this.firstName=t,this.lastName=e,this.email=s,this.password=n}}}}},e={};function s(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,s),i.exports}(()=>{const{Song:t,Playlist:e}=s(384);async function n(e){console.log(e);const s=document.querySelector(".playlist>.tracklist");let n=e.target.parentNode;for(;n&&"song-results-option"!==n.className;)n=n.parentNode;const o=n.querySelector(".song-add-btn");if(o){n.parentNode.removeChild(n);const t=n.querySelector("svg");t.parentNode.className="song-remove-btn",t.setAttribute("viewBox","0 0 1024 1024"),t.querySelector("g>path").setAttribute("d","M512 1024C229.248 1024 0 794.752 0 512S229.248 0 512 0s512 229.248 512 512-229.248 512-512 512z m0-896C299.968 128 128 299.968 128 512s171.968 384 384 384 384-171.968 384-384S724.032 128 512 128z m192 448H320a64 64 0 1 1 0-128h384a64 64 0 0 1 64 64c0 35.392-28.608 64-64 64z"),s.append(n)}else s.removeChild(n);const i=document.cookie.split(";");let r=null;for(let t=0;t<i.length;t++){const e=i[t].trim();if(e.startsWith("playlist=")){r=JSON.parse(e.split("=")[1]);break}}console.log(i),console.log(r),r||(r={songs:[]});const l=new t(n.querySelector(".song-name").innerText,n.querySelector(".song-artists").innerText,n.querySelector(".song-image").src);o?r.songs.push(l):r.songs=r.songs.filter((t=>t.title!==l.title&&t.artists!==l.artists)),document.cookie=`playlist=${JSON.stringify(r)};max-age=86400`,console.log(document.cookie.split(";")),console.log(r)}document.addEventListener("DOMContentLoaded",(()=>{const e=document.cookie.split(";");let s=null;for(let t=0;t<e.length;t++){const n=e[t].trim();if(n.startsWith("playlist=")){s=JSON.parse(n.split("=")[1]);break}}if(s){const e=s.songs,o=[];console.log(e),e.forEach((t=>{o.find((e=>e.title===t.title&&e.artists===t.artists))||o.push(t)})),s.songs=o,console.log(s);const i=document.querySelector(".playlist>.tracklist");s.songs.forEach((e=>{const s=new t(e.title,e.artists,e.coverart).toHTML(!1);console.log(s),s.querySelector(".song-remove-btn>svg").addEventListener("click",n),i.querySelector(`[data-title="${e.title}"][data-artists="${e.artists}"]`)||i.appendChild(s)})),console.log(s),document.cookie=`playlist=${JSON.stringify(s)};max-age=86400`}const o=document.querySelector(".search-input");o&&o.addEventListener("input",(async e=>{let s=await function(e){const s=encodeURIComponent(e),n=fetch(`https://genius.com/api/search/songs?q=${s}&limit=10`).json();return console.log(n),n.response.sections[0].hits.map((e=>new t(e.result.title,e.result.artist_names,e.result.song_art_image_url)))}(e.target.value);console.log(s),s.sort(((t,e)=>t.title<e.title?-1:t.title>e.title?1:t.artists<e.artists?-1:t.artists>e.artists?1:0));const o=document.querySelector(".playlist>.tracklist");s=s.filter((t=>!o.querySelector(`[data-title="${t.title}"][data-artists="${t.artists}"]`)));const i=document.querySelector(".results");i.innerHTML="",s.forEach((t=>{const e=t.toHTML(!0);i.appendChild(e),e.querySelector(".song-results-option>.song-add-btn>svg").addEventListener("click",n)}))}))}))})()})();